# 期末考试

## 修改两条文法

1. VarDef -> Ident { '[' ConstExp ']' } 

   | Ident { '[' ConstExp ']' } '=' InitVal 

   | Ident '=' 'getint' '(' ')'

2. MulExp -> UnaryExp | MulExp ('*' | '/' | '%' | 'bitand' ) UnaryExp

说明：

1. Ident '=' 'getint' '(' ')' 类似于`int i = getint();` 等价于`int i; i = getint();`
2. bitand 为按位与，优先级和乘除模同级。

*值得一提的是，我 15 个点只过了 14 个。*

## 代码生成和代码优化

给了两段代码，希望你对这两段代码进行优化。显然我没优化。

## 错误处理

简答题。如果要求一维数组初始化时，数组的长度和后面大括号的元素个数一致（大于或等于），例如`a[2]={1, 2}`，不能`a[1] = {1, 2}`，你会怎么做。结合源代码进行说明。

## 简答题

针对上面代码优化的某个函数：

1. pcode 或 llvm 说一下运行栈。
2. mips 说明你是如何进行寄存器分配的。